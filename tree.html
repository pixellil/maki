<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>cristmas tree</title>
    <link rel="stylesheet" type="text/css" href="indextree.css">

    <!-- <script src="https://code.jquery.com/jquery-1.12.4.js"></script> -->
    <!-- <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script> -->
    <script src="jquery-3.5.1.min.js"></script>
    <script src="jquery-ui.js"></script>

    <script type="text/javascript">
      $(function() {
        $('.tree').draggable({containment: "parent"});
      });
    </script>

    <script>
      $(document).ready(function(){

        // $(document).mousemove(function(event){
      	// 	var x = event.pageX;
      	// 	var y = event.pageY;
      	// 	console.log( 'Координаты курсора: (' + x + '; ' + y + ')' );
      	// });

        $(".buttonclone").click(function(a){

          $(a.currentTarget).find('img').clone().addClass('ready-to-drop new-ball').appendTo("#area").draggable({containment: "parent"});
          $('#tree').droppable({
            drop: function(a) {
                if (!$(a.toElement).hasClass('ready-to-drop')) {
                  return;
                }
                console.warn(a);
                $(a.toElement)
                .appendTo('#tree')
                .removeClass('ready-to-drop')
                .addClass('tree-toy')
                .draggable({containment: "parent"})
                .css({
                  'position': 'absolute',
                  "top": (a.originalEvent.clientY - a.target.offsetTop) - a.toElement.clientHeight / 2,
                  "left": (a.originalEvent.clientX - a.target.offsetLeft) - a.toElement.clientWidth / 2
                });
            }
          });
        });
      });
    </script>

    <script>
      $(document).ready(function(){
        $(".container-my-name").click(function(b){
          const toys = $('.ready-to-drop');
          // console.warn(toys.length, toys);
          var arrayToys = [];
          arrayToys.push(toys);

          console.log('arrayToys = ', arrayToys);

          var arrayCoord = [[730,285],[690,285],[650,285],[670,330],[690,375],[670,420],[650,465],[690,465],[730,465],[730,285]];

          console.warn('arrayToys[0].length = ', arrayToys[0].length);

          let i = 0;
          while(i != arrayToys[0].length) {
            $(arrayToys[0][i+1]).css({
              'position': 'absolute',
              "top": arrayCoord[i+1][0],
              "left": arrayCoord[i+1][1]
            });
            i++;
          }
          // for(let i = 0; i < arrayToys[0].length + 1; i++) {
          //   $(arrayToys[0][i+1]).css({
          //     'position': 'absolute',
          //     "top": arrayCoord[i+1][0],
          //     "left": arrayCoord[i+1][1]
          //   });
          // }

        });
      });
    </script>

  </head>
  <body>
    <div class="ball-conteiner">

      <div class="buttonclone container-ball-plus">
        <img class="ball-img" src="ball1.png" alt="Photo">
        <span class="text-plus">+</span>
      </div>
      <div class="buttonclone container-ball-plus">
        <img class="ball-img" src="ball2.png" alt="Photo">
        <span class="text-plus" style="color: black;">+</span>
      </div>
      <div class="buttonclone container-ball-plus">
        <img class="ball-img" src="ball3.png" alt="Photo">
        <span class="text-plus">+</span>
      </div>
      <div class="buttonclone container-ball-plus">
        <img class="ball-img" src="ball4.png" alt="Photo">
        <span class="text-plus">+</span>
      </div>

    </div>

    <div id="area" class="area">
      <div id="tree" class="tree">
        <img class="tree-img" src="tree.png" alt="Photo">
      </div>
    </div>

    <div class='container-my-name'><span class='my-name'>MY NAME</span></div>

  </body>
</html>
